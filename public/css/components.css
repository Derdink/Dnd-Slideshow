/* Card */
.card {
    background-color: var(--cds-ui-01, var(--bg-primary));
    border-radius: var(--cds-radius-lg, var(--border-radius-lg));
    box-shadow: var(--cds-shadow-md, var(--shadow-md));
    padding: var(--cds-spacing-04, var(--spacing-md));
    transition: box-shadow var(--cds-motion-normal-01, var(--transition-normal));
}

.card:hover {
    box-shadow: var(--cds-shadow-lg, var(--shadow-lg));
}

.card-header {
    margin-bottom: var(--cds-spacing-04, var(--spacing-md));
    padding-bottom: var(--cds-spacing-03, var(--spacing-sm));
    border-bottom: 1px solid var(--cds-ui-03, var(--border-color));
}

.card-body {
    margin-bottom: var(--cds-spacing-04, var(--spacing-md));
}

.card-footer {
    padding-top: var(--cds-spacing-03, var(--spacing-sm));
    border-top: 1px solid var(--cds-ui-03, var(--border-color));
}

/* Explicit Carbon Modal Base Styles (Ensure they apply) */
.bx--modal {
  position: fixed;
  top: 0;
  left: 0;
  z-index: var(--cds-z-index-overlay, 8000); /* Use Carbon z-index */
  display: flex; /* Use flex for centering */
  width: 100%;
  height: 100%;
  align-items: center;
  justify-content: center;
  visibility: hidden; /* Initially hidden */
  opacity: 0;
  background-color: var(--cds-overlay-01, rgba(22, 22, 22, 0.5));
  transition: opacity var(--cds-motion-moderate-01, 150ms) var(--cds-motion-easing-productive) 0s,
              visibility var(--cds-motion-moderate-01, 150ms) var(--cds-motion-easing-productive) 0s;
}

.bx--modal.is-visible {
  visibility: visible;
  opacity: 1;
}

/* Ensure modal container doesn't inherit strange styles */
.bx--modal-container {
  width: auto; /* Let content determine width */
  max-width: 90%; /* Prevent overly wide modals */
  max-height: 90vh; /* Prevent overly tall modals */
  display: flex;
  flex-direction: column;
  background-color: var(--cds-ui-background, #ffffff); /* Use Carbon background */
  border-radius: 0; /* Carbon modals typically don't have rounded corners */
  box-shadow: var(--cds-shadow-md); /* Use Carbon shadow */
  overflow: hidden; /* Prevent content bleed */
}

.bx--modal-content {
    overflow-y: auto; /* Allow content scrolling */
    padding: var(--cds-spacing-05); /* Carbon padding */
}

/* Toast */
.toast {
    position: fixed;
    bottom: var(--cds-spacing-05, var(--spacing-lg));
    right: var(--cds-spacing-05, var(--spacing-lg));
    background-color: var(--cds-ui-01, var(--bg-primary));
    border-radius: var(--cds-radius-md, var(--border-radius-md));
    padding: var(--cds-spacing-04, var(--spacing-md));
    box-shadow: var(--cds-shadow-lg, var(--shadow-lg));
    z-index: var(--cds-z-index-tooltip, var(--z-index-tooltip));
    display: flex;
    align-items: center;
    gap: var(--cds-spacing-04, var(--spacing-md));
    animation: slideIn 0.3s ease-out;
}

.toast-success {
    border-left: 4px solid var(--cds-support-success, var(--color-success));
}

.toast-error {
    border-left: 4px solid var(--cds-support-error, var(--color-danger));
}

.toast-warning {
    border-left: 4px solid var(--cds-support-warning, var(--color-warning));
}

.toast-info {
    border-left: 4px solid var(--cds-support-info, var(--color-info));
}

/* Form Components */
.form-group {
    margin-bottom: var(--cds-spacing-04, var(--spacing-md));
}

.form-label {
    display: block;
    margin-bottom: var(--cds-spacing-02, var(--spacing-xs));
    font-weight: 500;
    font-size: var(--cds-type-scale-02, var(--font-size-sm));
    color: var(--cds-text-01, var(--text-primary));
}

.form-control {
    width: 100%;
    padding: var(--cds-spacing-03, var(--spacing-sm));
    border: 1px solid var(--cds-ui-03, var(--border-color));
    border-radius: var(--cds-radius-md, var(--border-radius-md));
    transition: border-color var(--cds-motion-fast-01, var(--transition-fast)), 
                box-shadow var(--cds-motion-fast-01, var(--transition-fast));
    font-size: var(--cds-type-scale-03, var(--font-size-base));
    line-height: var(--cds-line-height-02, var(--line-height-normal));
}

.form-control:focus {
    outline: none;
    border-color: var(--cds-interactive-01, var(--color-primary));
    box-shadow: 0 0 0 2px rgba(15, 98, 254, 0.2);
}

.form-error {
    color: var(--cds-support-error, var(--color-danger));
    font-size: var(--cds-type-scale-02, var(--font-size-sm));
    margin-top: var(--cds-spacing-02, var(--spacing-xs));
}

/* Navigation */
.nav {
    display: flex;
    gap: var(--cds-spacing-04, var(--spacing-md));
    list-style: none;
}

.nav-link {
    color: var(--cds-text-02, var(--text-secondary));
    text-decoration: none;
    padding: var(--cds-spacing-03, var(--spacing-sm));
    border-radius: var(--cds-radius-md, var(--border-radius-md));
    transition: all var(--cds-motion-fast-01, var(--transition-fast));
    font-size: var(--cds-type-scale-02, var(--font-size-sm));
}

.nav-link:hover {
    color: var(--cds-text-01, var(--text-primary));
    background-color: var(--cds-ui-02, var(--bg-secondary));
}

.nav-link.active {
    color: var(--cds-interactive-01, var(--color-primary));
    background-color: var(--cds-ui-02, var(--bg-secondary));
}

/* Animations */
@keyframes slideIn {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

/* Loading Spinner */
.spinner {
    width: 40px;
    height: 40px;
    border: 4px solid var(--cds-ui-02, var(--bg-secondary));
    border-top-color: var(--cds-interactive-01, var(--color-primary));
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

/* --- Settings Section --- */

#management{
    padding: 0em 2em;
}
#settingsSection {
    background-color: var(--cds-ui-02, var(--bg-secondary)); /* Light gray background */
    border-bottom: 1px solid var(--cds-ui-03, var(--border-color));
}

#manageHeader {
    display: flex;
    align-items: center;
    justify-content: space-between; /* Push controls to the right */
    padding: 1em 2em;
    
}

#manageTitle {
    /* Use Carbon heading styles */
    font-size: var(--cds-heading-02, 1.25rem); /* Adjust as needed */
    font-weight: 600;
    line-height: var(--cds-heading-compact-02, 1.25rem);
    margin: 0; /* Remove default heading margin */
    flex-grow: 1; /* Allow title to take up space */
}

.header-controls {
    display: flex;
    align-items: center;
    gap: var(--cds-spacing-03, 0.5rem); /* Spacing between buttons */
}

.header-controls .bx--btn--icon-only svg {
    width: 1rem; /* 16px */
    height: 1rem;
    fill: var(--cds-icon-primary, #161616);
}

/* Change toggle background when settings are open */
#settingsToggle.active {
    background-color: var(--cds-ui-01, var(--bg-primary)); /* Match settings-details background */
    /* Optionally, adjust border or other styles if needed for seamless look */
}

/* Styling for the collapsible settings details area */
#settings-details {
    padding: var(--cds-spacing-05, 1.5rem);
    background-color: var(--cds-ui-01, var(--bg-primary)); /* White background */
    border-radius: var(--cds-radius-md, 0.375rem);
    border: 1px solid var(--cds-ui-03, var(--border-color));
    
    /* display: none; is set inline initially, controlled by JS */
}

#settings-details .bx--tabs{
    border-bottom: 2px solid var(--cds-ui-03, var(--border-color));
}

/* Style adjustments for elements within settings details if needed */
.settings-group {
    margin-bottom: var(--cds-spacing-06, 2rem);
}

.settings-row {
    display: flex;
    align-items: flex-end; /* Align items to bottom for button alignment */
    gap: var(--cds-spacing-05, 1.5rem);
    flex-wrap: wrap;
}

/* Target direct form item children of the settings row in the first tab */
#tab-panel-1 .settings-row > .bx--form-item {
    flex-grow: 1; /* Don't grow */
    flex-shrink: 0; /* Don't shrink */
    /* Width will be based on content or specific rules like for #timeInputs */
}

.time-inputs {
    display: flex;
    gap: var(--cds-spacing-03, 0.5rem);
}

#timeInputs {
    width: auto;
}

#orderContainer .bx--btn-set {
    display: flex; /* Ensure button set displays inline */
    width: max-content; /* Make set only as wide as content */
}

/* Prevent order buttons from expanding */
#tab-panel-1 #orderContainer .bx--btn-set .bx--btn {
    width: auto; 
    flex-grow: 0;
    flex-shrink: 0;
}

#saveSettingsBtn span {
    margin-left: var(--cds-spacing-03, 0.5rem);
}

#saveMessage {
    margin-left: var(--cds-spacing-05, 1.5rem);
}

/* Carbon Tab Content Visibility */
.bx--tab-content > .bx--tab-panel[aria-hidden="true"] {
    display: none;
}

.bx--tab-content > .bx--tab-panel[aria-hidden="false"] {
    display: block;
}

/* --- Upload Section --- */
#uploadSection {
    padding: var(--cds-spacing-05, 1.5rem); /* Add some padding */
}

#dropArea {
    border: 2px dashed var(--cds-border-subtle-01, #ccc);
    border-radius: var(--cds-radius-md, 0.375rem);
    padding: var(--cds-spacing-07, 3rem) var(--cds-spacing-05, 1.5rem);
    text-align: center;
    margin-bottom: var(--cds-spacing-05, 1.5rem);
    background-color: var(--cds-ui-01, #ffffff);
    transition: background-color var(--cds-motion-fast-01, 150ms ease), border-color var(--cds-motion-fast-01, 150ms ease);
}

#dropArea.highlight {
    border-color: var(--cds-interactive-01, #0f62fe);
    background-color: var(--cds-hover-ui, #e5e5e5); /* Subtle hover background */
}

#dropArea p {
    color: var(--cds-text-secondary, #525252);
    margin-bottom: var(--cds-spacing-04, 1rem);
}

/* #selectFiles button is now styled via Carbon classes added in HTML */

#uploadStatus {
    margin-top: var(--cds-spacing-05);
    border: 1px dashed var(--cds-ui-04);
    padding: var(--cds-spacing-05);
    max-height: 200px;
    overflow-y: auto;
    background-color: var(--cds-layer-01);
    display: none; /* Hide by default */
}

#uploadStatus div {
    padding: var(--cds-spacing-02, 0.25rem) 0;
    border-bottom: 1px solid var(--cds-border-subtle-00, #f4f4f4);
}

#uploadStatus div:last-child {
    border-bottom: none;
}

/* --- Filter Container --- */
#filterContainer {
    display: flex;
    align-items: center;
    gap: var(--cds-spacing-03, 0.5rem); /* Consistent gap */
    padding: var(--cds-spacing-04, 1rem) 0rem; /* Add vertical padding */
    
}



#filterContainer .bx--btn--icon-only svg {
    width: 1rem; /* 16px */
    height: 1rem;
    fill: var(--cds-icon-primary, #161616);
}

/* Make search input expand */
#filterContainer .search-wrapper {
    flex-grow: 1; /* Apply flex-grow to the wrapper */
    /* Optionally add min-width if needed */
    /* min-width: 200px; */
}

/* Remove flex-grow from the search component itself if previously added */
#filterContainer .bx--search-input {
    background-image: url("data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%3E%3Cpath%20d='M15,14.3L10.7,10c0.9-1.2,1.4-2.6,1.4-4c0-3.3-2.7-6-6-6S0,2.7,0,6s2.7,6,6,6c1.4,0,2.8-0.5,4-1.4l4.3,4.3c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3C15.5,15.3,15.5,14.7,15,14.3z%20M6,10.5c-2.5,0-4.5-2-4.5-4.5s2-4.5,4.5-4.5s4.5,2,4.5,4.5S8.5,10.5,6,10.5z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: 16px 50%;
}

/* --- Tag Manager Specific Styles --- */
#tagManagerContainer {
    padding: var(--cds-spacing-05, 1.5rem);
    background-color: var(--cds-ui-02, #ffffff);
    border: 1px solid var(--cds-border-subtle-01, #e0e0e0);
    margin-bottom: 1rem;
    
}

#newTagForm {
    display: flex;
    gap: var(--cds-spacing-03, 0.5rem);
    margin-bottom: var(--cds-spacing-05, 1.5rem);
}

#newTagForm #newTagName {
    flex-grow: 1;
    /* Use Carbon Text Input styles */
    padding: var(--cds-spacing-03, 0.5rem) var(--cds-spacing-04, 1rem);
    border: 1px solid var(--cds-border-subtle-01, #ccc);
    border-radius: var(--cds-radius-md, 0);
    font-size: var(--cds-body-compact-01, 0.875rem);
    line-height: var(--cds-line-height-md, 1.5);
    background-color: var(--cds-field-01, #f4f4f4);
    color: var(--cds-text-primary, #161616);
}

#newTagForm #newTagName:focus {
    outline: 2px solid var(--cds-focus, #0f62fe);
    outline-offset: -2px;
    border-color: transparent;
}

#newTagForm button {
    /* Use Carbon Button styles */
    border: 1px solid var(--cds-button-primary, #0f62fe);
    background-color: var(--cds-button-primary, #0f62fe);
    color: var(--cds-text-on-color, #ffffff);
    cursor: pointer;
    font-size: var(--cds-body-compact-01, 0.875rem);
    border-radius: var(--cds-radius-md, 0);
    transition: background-color var(--cds-motion-fast-01, 110ms), border-color var(--cds-motion-fast-01, 110ms), box-shadow var(--cds-motion-fast-01, 110ms);
}

#newTagForm button:hover {
    background-color: var(--cds-button-primary-hover, #0353e9);
    border-color: var(--cds-button-primary-hover, #0353e9);
}

#tagManagerList {
    display: flex;
    flex-wrap: wrap;
    /* gap: var(--cds-spacing-03, 0.5rem); */
}

/* NEW: Custom Carbon Tag Styling */
.bx--tag.bx--tag--custom {
    /* Override Carbon background and text color using our CSS variables */
    /* We set these variables inline in JS, but define defaults/fallbacks here */
    background-color: var(--tag-background-color, var(--cds-tag-background-gray, #e0e0e0));
    color: var(--tag-text-color, var(--cds-tag-color-gray, #161616));
    border: none; /* Remove default Carbon border if any */
    max-width: 350px; /* Optional: Prevent tags from becoming too wide */
    overflow: hidden; /* Hide overflow */
    padding: 0px;
    text-overflow: ellipsis; /* Add ellipsis */
    white-space: nowrap;
    transition: filter var(--cds-motion-fast-01, 110ms), background-color var(--cds-motion-fast-01, 110ms); /* Add transition */
}
.bx--tag span{
padding: 0rem 0.5rem;
}

.bx--tag{
    padding: 0em;
}

/* Add hover effect for interactive tags */
.bx--tag.bx--tag--custom:not(.hidden-tag):hover {
    filter: brightness(90%); /* Slightly darken the background */
    cursor: pointer; /* Reinforce clickable appearance for editable/addable tags */
}

/* Style the close icon within our custom tags */
.bx--tag.bx--tag--custom .bx--tag__close-icon {
    /* Ensure the icon inherits the correct contrast color */
    fill: currentColor;
    color: inherit; /* Inherit from parent tag's text color */
    margin: 0px;
}

.bx--tag.bx--tag--custom .bx--tag__close-icon:hover {
     /* Slightly darken or change background on hover? */
     background-color: rgba(0, 0, 0, 0.1); /* Subtle hover effect */
}

/* Special styling for the 'Hidden' tag using Carbon's gray */
.bx--tag.bx--tag--custom.hidden-tag {
    background-color: #000000;
    color: var(--cds-tag-color-gray, #ffffff);
    cursor: default; /* No interactions */
}

/* Prevent hover effect on the static hidden tag */
.bx--tag.bx--tag--custom.hidden-tag:hover {
    filter: none; /* Ensure no brightness change */
    cursor: default;
}

/* --- Playlist Manager Styles --- */
#playlistManagerSection {
    padding: var(--cds-spacing-05, 1.5rem);
    background-color: var(--cds-ui-02, #ffffff);
    border: 1px solid var(--cds-border-subtle-01, #e0e0e0);
    margin-bottom: 1rem;
}

.playlist-manager-controls.bx--row {
    align-items: flex-end; /* Align items to the bottom */
}

#playlistSearch {
    background-image: url("data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%3E%3Cpath%20d='M15,14.3L10.7,10c0.9-1.2,1.4-2.6,1.4-4c0-3.3-2.7-6-6-6S0,2.7,0,6s2.7,6,6,6c1.4,0,2.8-0.5,4-1.4l4.3,4.3c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3C15.5,15.3,15.5,14.7,15,14.3z%20M6,10.5c-2.5,0-4.5-2-4.5-4.5s2-4.5,4.5-4.5s4.5,2,4.5,4.5S8.5,10.5,6,10.5z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: 16px 50%;
    height: 3rem;
}

/* Ensure inline form elements align and input grows */
#newPlaylistForm.bx--form-inline {
    display: flex;
    width: 100%;
}

#newPlaylistForm .bx--form-item {
    flex-grow: 1; /* Allow the input container to grow */
    margin-right: var(--cds-spacing-03); /* Space before button */
}

/* Playlist Table Styles */
.bx--data-table-container {
    border-left: none; /* Remove left border */
    border-right: none; /* Remove right border */
    border-top: none; /* Remove top border */
    /* Keep bottom border for the container if needed, or remove */
    /* border-bottom: 1px solid var(--cds-ui-03); */
    border-radius: 0; /* Remove border radius */
}

.bx--data-table {
    width: 100%;
    border-collapse: collapse;
}

.bx--data-table tr {
    border-bottom: 1px solid var(--cds-ui-03);
}

/* Remove bottom border from the last row */
.bx--data-table tr:last-child {
    border-bottom: none;
}

.bx--data-table tr.hidden-list {
    opacity: 0.5;
    background-color: var(--cds-layer-disabled-01);
}

.bx--data-table .bx--table-cell {
    padding: var(--cds-spacing-03) var(--cds-spacing-04);
}

/* Carbon-styled scrollbar */
.bx--data-table-container::-webkit-scrollbar {
    width: 8px;
}

.bx--data-table-container::-webkit-scrollbar-track {
    background: var(--cds-ui-02);
}

.bx--data-table-container::-webkit-scrollbar-thumb {
    background: var(--cds-ui-04);
    border-radius: 4px;
}

.bx--data-table-container::-webkit-scrollbar-thumb:hover {
    background: var(--cds-ui-05);
}

/* Playlist Table Action Buttons */
#playlistList .bx--table-cell:last-child {
    text-align: right;
}

/* Container for actions including toggle */
.playlist-actions-container {
    display: flex;
    align-items: center;
    justify-content: flex-end;
}

/* Clickable toggle for count/arrow */
.playlist-count-toggle {
    display: flex;
    align-items: center;
    cursor: pointer;
    color: var(--cds-text-02);
    margin-right: var(--cds-spacing-05); /* Space between toggle and buttons */
}

.playlist-count-toggle:hover {
    color: var(--cds-text-01);
}

.playlist-count-toggle .playlist-toggle-arrow {
    margin-right: var(--cds-spacing-02);
    fill: currentColor;
    transition: transform var(--cds-motion-fast-01);
}

/* Specific button spacing */
#playlistList .bx--btn--icon-only {
    margin-left: var(--cds-spacing-02);
}

/* Set icon color */
#playlistList .bx--btn--icon-only svg {
    fill: var(--cds-icon-01);
}

/* Change background on hover */
#playlistList .bx--btn--ghost.bx--btn--icon-only:hover {
    background-color: rgba(0, 0, 0, 1); /* Use Carbon background color variable */
}

/* Playlist count text styling (already part of toggle) */
.playlist-count {
    font-size: var(--cds-type-scale-02);
}

/* Details Row and Thumbnail Grid */
.playlist-details-row {
    /* Styles for the hidden row itself */
    background-color: var(--cds-layer-01); /* Slightly different background */
}

.playlist-details-row td {
    padding: 0 !important; /* Remove default cell padding */
}

.playlist-thumbnail-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); /* Responsive grid */
    gap: var(--cds-spacing-03);
    padding: var(--cds-spacing-05);
    background-color: var(--cds-ui-01); /* Match card backgrounds? */
}

.playlist-thumbnail-item {
    position: relative;
    aspect-ratio: 1.6; /* Keep aspect ratio, adjust if needed */
    overflow: hidden;
    border-radius: var(--cds-radius-sm);
}

.playlist-thumbnail-item img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: filter var(--cds-motion-fast-01); /* Add transition for hover */
}

/* Style the delete button */
#playlistList .delete-thumbnail-btn {
    position: absolute;
    top: var(--cds-spacing-01);
    right: var(--cds-spacing-01);
    width: 24px; /* Smaller size */
    height: 24px;
    padding: 0;
    color: #ffffff;
    background-color: rgba(0, 0, 0, 0.8); /* Semi-transparent background */
    border-radius: 50%;
    border: none;
    opacity: 0; /* Hidden by default */
    transition: opacity var(--cds-motion-fast-01);
    cursor: pointer;
    display: flex; /* Center icon */
    align-items: center;
    justify-content: center;
    z-index: 1; /* Ensure it's above the image */
    min-height: 24px;
}

#playlistList .delete-thumbnail-btn svg {
    fill: #ffffff; /* White icon */
    width: 12px; /* Smaller icon */
    height: 12px;
}

/* Show delete button and slightly dim image on item hover */
#playlistList .playlist-thumbnail-item:hover .delete-thumbnail-btn {
    opacity: 1;
}

.playlist-thumbnail-item:hover img {
    filter: brightness(0.8); /* Dim image */
}

/* --- Filter Tabs Wrapper --- */
#filterTabsWrapper {
    display: grid; /* Use grid for desktop */
    grid-template-columns: 3fr 1fr; /* Define 2 columns (e.g., 75% / 25% split) */
    gap: var(--cds-spacing-06); /* Use grid gap */   
    padding: var(--cds-spacing-05, 1.5rem);
    margin-bottom: 1rem;
    /* Hide by default, JS toggles display */
    max-width: 100%;
    display: none; 
}

/* Remove the Carbon grid class overrides and flex properties */
/* #filterTabsWrapper .bx--row { ... } */

/* Style the direct children (sections) as grid items */
#filterTabsWrapper > div { /* Target .tags-section and .playlists-section */
    /* No specific width needed, grid handles it */
    padding: var(--cds-spacing-05);
    border: 1px solid var(--cds-border-subtle-01);
}

/* Add header styles */
#filterTabsWrapper h3 {
    margin-bottom: var(--cds-spacing-05);
    font-size: var(--cds-heading-compact-01);
    font-weight: 600;
}

/* Style tag filter container */
#tagFilterDropdown {
    display: flex; /* Use flex for wrapping on desktop too */
    flex-wrap: wrap;
    gap: var(--cds-spacing-02);
    /* Styles for individual filter-tag-pill should apply */
}

.filter-tag-pill {
    /* Basic styles for filter tags */
    margin: var(--cds-spacing-01);
    transition: opacity 0.2s ease-in-out, filter 0.2s ease-in-out;
}

.filter-tag-pill.unavailable {
    /* Styles for tags not present in the current view */
    /* Opacity is set by JS (e.g., 0.3) */
    /* pointer-events: none; is set by JS */
    filter: grayscale(100%); /* Add grayscale effect */
    cursor: not-allowed;
}


/* Style playlist filter container */
.playlistsContainer {
    display: flex;
    flex-direction: column;
    height: 100%; /* Try to fill parent grid cell */
}

.playlist-filter-header {
    display: flex;
    align-items: center;
    gap: var(--cds-spacing-03);
    margin-bottom: var(--cds-spacing-04); /* More space below header */
    padding-bottom: var(--cds-spacing-03); /* Space for border */
    
}

#playlist-filter-search-input, #settingsPlaylistSearch {
    background-image: url("data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%3E%3Cpath%20d='M15,14.3L10.7,10c0.9-1.2,1.4-2.6,1.4-4c0-3.3-2.7-6-6-6S0,2.7,0,6s2.7,6,6,6c1.4,0,2.8-0.5,4-1.4l4.3,4.3c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3C15.5,15.3,15.5,14.7,15,14.3z%20M6,10.5c-2.5,0-4.5-2-4.5-4.5s2-4.5,4.5-4.5s4.5,2,4.5,4.5S8.5,10.5,6,10.5z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: 10px 50%;
    padding: 0 2rem;
}

/* Ensure header search takes available space */
.playlist-filter-header .bx--search {
    flex-grow: 1;
}

.playlist-deselect-btn {
    /* Uses bx--btn, bx--btn--ghost, bx--btn--sm */
    flex-shrink: 0; /* Prevent button from shrinking */
    color: #161616;
}

.playlists-scroll-container {
    max-height: 300px; /* Limit height */
    overflow-y: auto;
    padding-right: var(--cds-spacing-02); /* Space for scrollbar */
    flex-grow: 1; /* Allow scroll area to fill remaining space */
}

/* Style individual playlist item */
.playlist-filter-item {
    display: flex;
    align-items: center;
    padding: var(--cds-spacing-03);
    margin-bottom: var(--cds-spacing-01); /* Smaller gap between items */
    border-radius: var(--cds-radius-md);
    cursor: pointer;
    transition: background-color var(--cds-motion-fast-01);
    border: 1px solid transparent; /* Placeholder for selection border */
}

.playlist-filter-item:hover {
    background-color: var(--cds-layer-hover-01);
}

/* Selected state */
.playlist-filter-item.selected {
    background-color: var(--cds-layer-03);
    border-left: 3px solid var(--cds-interactive-01); /* Use border highlight */
    padding-left: calc(var(--cds-spacing-03) - 3px); /* Adjust padding for border */
}

/* Color indicator */
.playlist-filter-color {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    margin-right: var(--cds-spacing-04); /* More space after color */
    flex-shrink: 0;
}

/* Container for name and count */
.playlist-filter-info {
    display: flex;
    justify-content: space-between; /* Push count to the right */
    align-items: center;
    flex-grow: 1;
    overflow: hidden; /* Prevent long names breaking layout */
}

/* Playlist name styling */
.playlist-filter-name {
    font-size: var(--cds-body-compact-01); /* Use compact size */
    color: var(--cds-text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-right: var(--cds-spacing-03); /* Space before count */
}

/* Image count styling */
.playlist-filter-count {
    font-size: var(--cds-caption-01); /* Use caption size */
    color: var(--cds-text-secondary);
    white-space: nowrap;
    flex-shrink: 0; /* Prevent count from shrinking */
}

/* Carbon-styled scrollbar for playlist filter */
.playlists-scroll-container::-webkit-scrollbar {
    width: 8px;
}
.playlists-scroll-container::-webkit-scrollbar-track {
    background: var(--cds-ui-02);
}
.playlists-scroll-container::-webkit-scrollbar-thumb {
    background: var(--cds-ui-04);
    border-radius: 4px;
}
.playlists-scroll-container::-webkit-scrollbar-thumb:hover {
    background: var(--cds-ui-05);
}

/* --- Image Table Specific Styles (Within Carbon Structure) --- */

#imageTableContainer {
    background-color: var(--cds-layer-01); /* ADDED: White background */
    margin-top: var(--cds-spacing-05);
}

#imageTable {
    width: 100%;
    /* Ensure default layout allows natural column sizing */
    /* table-layout: auto; */ /* This is usually the default */
}

/* Checkbox */
#imageTable .bx--table-header.bx--table-column-checkbox,
#imageTable .bx--table-cell:nth-child(1) {
    width: 1%; /* Shrink-to-fit */
    white-space: nowrap; /* Prevent wrapping */
    min-width: 48px;
    padding-left: var(--cds-spacing-05);
    padding-right: var(--cds-spacing-03);
}

/* Thumbnail */
#imageTable .bx--table-header[data-sort-key="thumbnail"],
#imageTable .bx--table-cell:nth-child(2) {
    width: 1%; /* Shrink-to-fit */
    white-space: nowrap; /* Prevent wrapping */
    min-width: 80px;
    padding-left: var(--cds-spacing-03);
    padding-right: var(--cds-spacing-03);
}

/* Title */
#imageTable .bx--table-header[data-sort-key="title"],
#imageTable .bx--table-cell:nth-child(3) {
    width: auto; /* Expand */
    min-width: 300px;
    /* Removed overflow handling */
}

/* Tags */
#imageTable .bx--table-header[data-sort-key="tags"],
#imageTable .bx--table-cell:nth-child(4) {
    width: auto; /* Expand */
    /* Overflow handled by inner container */
}

/* Date Added */
#imageTable .bx--table-header[data-sort-key="dateAdded"],
#imageTable .bx--table-cell:nth-child(5) {
    width: 1%; /* Shrink-to-fit */
    white-space: nowrap; /* Prevent wrapping */
    min-width: 100px;
    text-align: left;
}
#imageTable .bx--table-header[data-sort-key="dateAdded"] {
    text-align: left;
    padding-right: var(--cds-spacing-05);
}

/* Actions */
#imageTable .bx--table-header:nth-child(6), /* Header */
#imageTable .bx--table-cell:nth-child(6) { /* Cell */
    width: 1%; /* Shrink-to-fit */
    white-space: nowrap; /* Prevent wrapping */
    min-width: 120px;
}
#imageTable .bx--table-header:nth-child(6) {
     text-align: left;
     padding-left: var(--cds-spacing-04);
}
#imageTable .bx--table-cell:nth-child(6) {
    text-align: right;
}

/* Thumbnail Styling */
#imageTable .image-thumbnail {
    max-width: 80px;  /* INCREASED size */
    max-height: 80px; /* INCREASED size */
    height: auto;
    display: block; 
    object-fit: cover; 
    border-radius: var(--cds-radius-sm);
}
#imageTable .thumbnail-error {
     width: 40px; /* INCREASED size for error icon */
     height: 40px;
     object-fit: contain;
}

/* REMOVED Description Truncation rules */
/* #imageTable .description-cell ... */

/* Tags Container within Table */
#imageTable .tags-cell .tag-container-in-table {
    display: flex;
    flex-wrap: wrap;
    gap: var(--cds-spacing-02);
    max-height: 5em; /* Limit height to show ~2 rows */
    overflow: hidden; /* Hide overflow - Keep hidden */
}

#imageTable .tags-cell .tag-container-in-table .bx--tag--custom span{
padding-left: 1.5em;
}
/* Action Buttons Container */
#imageTable .actions-cell .actions-container-in-table {
    display: flex;
    justify-content: flex-end; /* Keep buttons right-aligned within the cell */
    gap: var(--cds-spacing-01); 
}

.actions-container-in-table .bx--btn--ghost{
    color: #161616;
}

/* ADD specific hover style for consistency with Playlist Manager */
#imageTable .actions-cell .bx--btn--ghost.bx--btn--icon-only:hover {
  background-color: var(--cds-ui-background); 
}

/* Ensure danger button hover is correct */
#imageTable .actions-cell .bx--btn--danger.bx--btn--icon-only:hover {
     background-color: var(--cds-layer-hover-01); /* Match normal hover */
}

#tagSelectionContainer {
    display: flex;
    flex-wrap: wrap;
    gap: var(--cds-spacing-01);
}

.settings-tag-pill {
    /* Inherits from .bx--tag.bx--tag--filter */
    cursor: pointer;
    border: 2px solid transparent; /* Add border for selection indicator */
    opacity: 0.4; /* Dim unselected tags slightly */
    transition: border-color var(--transition-fast), opacity var(--transition-fast);
}

.settings-tag-pill:hover {
    opacity: 1;
}

.settings-tag-pill.selected {
    border-color: var(--cds-interactive-01); /* Use interactive color for border */
    opacity: 1; /* Full opacity when selected */
}

#playTagsBtn {
    /* Style the main play button if needed */
    margin-bottom: var(--cds-spacing-05);
}

/* Styles for Playlist Selection in Settings */
.settings-playlist-controls {
    display: flex;
    gap: var(--cds-spacing-03); /* Reduced gap again */
    align-items: flex-end; 
    margin-bottom: var(--cds-spacing-05);
}

.settings-playlist-controls .bx--form-item { /* Search container */
    flex: 1 1 0%; /* Allow grow/shrink, ZERO basis */
    min-width: 150px; /* Slightly reduced min-width just in case */
}

/* Ensure the search component itself fills the form item */
.settings-playlist-controls .bx--form-item .bx--search {
    width: 100%; 
}

.settings-playlist-controls .bx--btn-set { /* Button container */
    flex: 0 0 auto; /* Don't grow, don't shrink, auto basis */
}

/* Override potential width: 100% on buttons inside this specific set */
.settings-playlist-controls .bx--btn-set .bx--btn {
    width: auto; 
}

.settings-playlist-list-container {
    max-height: 300px; /* Match filter panel height */
    overflow-y: auto;
    /* Add CDS scrollbar styles */
    scrollbar-width: thin; /* For Firefox */
    /* Match data table scrollbar colors */
    scrollbar-color: var(--cds-ui-04) var(--cds-ui-02); /* For Firefox */
}

/* Webkit Scrollbar Styles */
.settings-playlist-list-container::-webkit-scrollbar {
    width: 8px;
}
.settings-playlist-list-container::-webkit-scrollbar-track {
    background: var(--cds-ui-02);
}
.settings-playlist-list-container::-webkit-scrollbar-thumb {
    /* Match data table scrollbar thumb */
    background-color: var(--cds-ui-04); 
    border-radius: 4px;
    border: 2px solid var(--cds-ui-02);
}
.settings-playlist-list-container::-webkit-scrollbar-thumb:hover {
    /* Match data table scrollbar thumb hover */
    background-color: var(--cds-ui-05);
}

/* Style for sortable headers */
#imageTable .bx--table-header[data-sort-key] {
    cursor: pointer;
}

/* Base style for the sort icon pseudo-element */
#imageTable .bx--table-header[data-sort-key].bx--table-sort--active::before {
    content: ''; 
    display: inline-block;
    width: 16px;
    height: 16px;
    margin-right: var(--cds-spacing-02); 
    vertical-align: middle; 
    background-repeat: no-repeat;
    background-position: center;
    background-size: contain;
    /* CHANGE Default: Descending CARET */
    background-image: url("data:image/svg+xml,%3Csvg%20focusable%3D'false'%20preserveAspectRatio%3D'xMidYMid%20meet'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20fill%3D'currentColor'%20width%3D'16'%20height%3D'16'%20viewBox%3D'0%200%2016%2016'%20aria-hidden%3D'true'%3E%3Cpath%20d%3D'M8%2011L3%206l.7-.7L8%209.6l4.3-4.3.7.7z'%3E%3C%2Fpath%3E%3C%2Fsvg%3E");
}

/* Override for Ascending CARET */
#imageTable .bx--table-header[data-sort-key].bx--table-sort--active.bx--table-sort--ascending::before {
    background-image: url("data:image/svg+xml,%3Csvg%20focusable%3D'false'%20preserveAspectRatio%3D'xMidYMid%20meet'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20fill%3D'currentColor'%20width%3D'16'%20height%3D'16'%20viewBox%3D'0%200%2016%2016'%20aria-hidden%3D'true'%3E%3Cpath%20d%3D'M8%205l5%205-.7.7L8%206.4%203.7%2010.7%203%2010z'%3E%3C%2Fpath%3E%3C%2Fsvg%3E");
}

/* Title/Subtitle Overlay Visibility */
.title-container {
    /* Base styles are in slideshow.css */
    transition: opacity 0.5s ease-in-out, visibility 0.5s ease-in-out; /* Smooth fade */
    opacity: 1;
    visibility: visible;
}

.title-container.text-overlay-hidden {
    opacity: 0;
    visibility: hidden;
    pointer-events: none; /* Prevent interaction when hidden */
}

/* ==========================================================================
   Mobile Styles (for manage.html)
   ========================================================================== */
@media (max-width: 768px) { /* Adjust breakpoint as needed */

    /* --- Header / Filter Area --- */
    #filterContainer #bulkDelete,
    #filterContainer #tagManagerToggle,
    #filterContainer #playlistManagerToggle {
        display: none;
    }

    /* --- Image Table Simplification --- */

    #imageTable {
        table-layout: fixed; /* Apply fixed layout ONLY for mobile */
        width: 100%; 
         font-size: var(--cds-type-scale-02); 
    }

    /* Constrain Checkbox column */
    #imageTable .bx--table-header:nth-child(1),
    #imageTable .bx--table-cell:nth-child(1) {
        width: 40px; /* Fixed width for checkbox */
        max-width: 40px;
        padding-left: var(--cds-spacing-03); /* Adjust padding */
        padding-right: var(--cds-spacing-02);
    }

    /* Constrain Thumbnail column */
    #imageTable .bx--table-header:nth-child(2),
    #imageTable .bx--table-cell:nth-child(2) {
        width: 56px; /* Slightly larger than thumbnail (40px + padding) */
        max-width: 56px;
        padding-left: var(--cds-spacing-02);
        padding-right: var(--cds-spacing-02);
    }

    /* Hide Tags and Date columns (header and body) */
    #imageTable .bx--table-header:nth-child(4), /* Tags header */
    #imageTable .bx--table-cell:nth-child(4),   /* Tags cell */
    #imageTable .bx--table-header:nth-child(5), /* Date header */
    #imageTable .bx--table-cell:nth-child(5) {  /* Date cell */
        display: none;
    }

    /* Hide Actions column header TEXT, keep cell */
    #imageTable .bx--table-header:nth-child(6) { /* Actions header */
        /* display: none; */ /* Keep the cell for layout */
        font-size: 0; /* Hide the text content */
        /* Optionally adjust padding if needed */
        /* padding: 0; */ 
    }

    /* Hide specific action buttons (Edit, Delete) */
    #imageTable .actions-cell .image-edit-btn,
    #imageTable .actions-cell .image-delete-btn {
        display: none;
    }

    /* Ensure Play button is still visible */
    #imageTable .actions-cell .image-play-btn {
        display: inline-flex; /* Or block, depending on desired layout */
    }
    
    /* Adjust actions cell padding if needed after hiding buttons */
    #imageTable .actions-cell {
        padding-left: var(--cds-spacing-03);
        padding-right: var(--cds-spacing-03);
    }

    /* Adjust thumbnail size? Optional. */
    #imageTable .image-thumbnail {
        width: 40px;
        height: 40px;
    }

    /* Constrain Title column width and allow wrapping */
    #imageTable .bx--table-header:nth-child(3), /* Title header */
    #imageTable .bx--table-cell:nth-child(3) {  /* Title cell */
        max-width: 120px; /* Adjust as needed */
        min-width: 80px;  /* Prevent collapsing too much */
        white-space: normal; /* Allow wrapping */
        word-break: break-word; /* Break long words if necessary */
    }

    /* --- Pagination Simplification --- */

    .bx--pagination__left .bx--pagination__text, /* Hide "x-y of z items" */
    .bx--pagination__left .bx--pagination__select { /* Hide "Items per page" select */
        display: none;
    }

    /* Optional: Adjust spacing or layout of remaining pagination controls */
    .bx--pagination__right {
        /* Ensure it takes full width or adjust as needed */
         width: 100%;
         justify-content: center; /* Center the remaining controls */
    }

    /* --- Header / Filter Simplification (Optional) --- */
    
    /* Example: Stack header controls vertically */
    /* 
    #manageHeader {
        flex-direction: column;
        align-items: flex-start;
    }
    #manageHeader .header-controls {
        margin-top: var(--cds-spacing-03);
    }
    */

    /* Example: Simplify filter container */
    /* 
    #filterContainer {
        flex-wrap: wrap;
    }
    #filterContainer .search-wrapper {
        width: 100%;
        margin-bottom: var(--cds-spacing-03);
    }
    */

    /* --- Filter Menu Stacking --- */

    #filterTabsWrapper {
        display: none; /* Keep hidden by default, JS toggles to block */
        margin-top: var(--cds-spacing-05); /* Add some space below filter button */
        /* Remove grid properties */
        grid-template-columns: none;
        gap: 0;
        border: none; /* Simplify border/padding for stacked mobile view */
        padding: 0;
        background-color: transparent;
    }

    #filterTabsWrapper > .tags-section,
    #filterTabsWrapper > .playlists-section {
        display: block; /* Ensure sections stack */
        width: 100%; /* Make sections full width */
        margin-bottom: var(--cds-spacing-05); /* Space between sections */
        padding: var(--cds-spacing-03); /* Add some padding back */
        border: 1px solid var(--cds-border-subtle-01);
    
    }

    /* Ensure filter pills/items can wrap */
    #tagFilterDropdown,
    #playlistFilterContainer {
        display: flex;
        flex-wrap: wrap;
        gap: var(--cds-spacing-03);
    }

    /* Style the direct children (sections) as grid items */
    #filterTabsWrapper > div { /* Target .tags-section and .playlists-section */
        /* No specific width needed, grid handles it */
        padding: var(--cds-spacing-05);
        
        border: 1px solid var(--cds-border-subtle-01);
    }

    /* Add header styles */
    #filterTabsWrapper h3 {
        margin-bottom: var(--cds-spacing-05);
        font-size: var(--cds-heading-compact-01);
        font-weight: 600;
    }

    /* Style tag filter container */
    #tagFilterDropdown {
        display: flex; /* Use flex for wrapping on desktop too */
        flex-wrap: wrap;
        gap: var(--cds-spacing-02);
        /* Styles for individual filter-tag-pill should apply */
    }

    .filter-tag-pill {
        /* Basic styles for filter tags */
        margin: var(--cds-spacing-01);
        transition: opacity 0.2s ease-in-out, filter 0.2s ease-in-out;
    }

    .filter-tag-pill.unavailable {
        /* Styles for tags not present in the current view */
        /* Opacity is set by JS (e.g., 0.3) */
        /* pointer-events: none; is set by JS */
        filter: grayscale(100%); /* Add grayscale effect */
        cursor: not-allowed;
    }

}


